<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QuickPoster ‚Äî Canva Style Editor</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

<!-- html2canvas & jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --bg1:#bce0fb; --bg2:#7b6cf6;
  --card-bg: rgba(255,255,255,0.95);
  --accent:#3f37c9;
  --muted:#666;
  --paper-white:#fffdfb;
}
body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:#111;}
h1{text-align:center;color:#fff;background:linear-gradient(90deg,#6dd5fa,#8e54e9);padding:15px;border-radius:10px;}
.wrap{display:grid;grid-template-columns:1fr 1fr;gap:20px;max-width:1200px;margin:20px auto;padding:10px;}
.panel{background:var(--card-bg);padding:15px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.1);}
.left input, .left select, .left textarea{width:100%;padding:10px;margin:6px 0;border-radius:8px;border:1px solid #e6e6e6;font-size:15px;box-sizing:border-box;}
textarea{resize:vertical;min-height:80px;}
.templates-grid{display:flex;flex-wrap:wrap;gap:12px;margin-top:8px;}
.tp{width:100px;border-radius:10px;padding:6px;background:#fafafa;border:2px solid transparent;cursor:pointer;text-align:center;}
.tp img{width:100%;height:70px;object-fit:cover;border-radius:6px;}
.tp.active{border-color:var(--accent);box-shadow:0 6px 18px rgba(63,55,201,0.12);}
.right{display:flex;flex-direction:column;align-items:center;}
.preview-wrap{background:var(--paper-white);padding:15px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.08);position:relative;width:100%;max-width:520px;}
.poster{width:100%;min-height:400px;padding:15px;border-radius:8px;overflow:hidden;box-sizing:border-box;background:#fff;}
.poster .title{font-size:28px;font-weight:800;text-align:center;margin:8px 0;}
.poster .sub{font-size:14px;text-align:center;margin:2px 0;color:var(--muted);}
.poster .bio{font-size:15px;margin-top:12px;line-height:1.4;text-align:center;white-space:pre-line;}
.small-ctrls{display:flex;gap:8px;position:absolute;top:12px;right:12px;}
.preview-actions{display:flex;gap:8px;margin-top:8px;justify-content:center;}
.page-thumbs{display:flex;gap:6px;margin-top:8px;justify-content:center;}
.page-thumb{width:50px;height:70px;border:2px solid transparent;cursor:pointer;}
.page-thumb.active{border-color:var(--accent);}
@media(max-width:980px){.wrap{grid-template-columns:1fr;}}
button{padding:6px 10px;border:none;border-radius:6px;background:var(--accent);color:#fff;cursor:pointer;}
button.ghost{background:#fff;color:var(--accent);border:1px solid var(--accent);}
</style>
</head>
<body>

<h1>QuickPoster ‚Äî Canva Style Editor</h1>
<div class="wrap">

<!-- LEFT: type, template, fields -->
<div class="panel left">
  <label>Poster Type</label>
  <select id="posterType">
    <option value="obituary">üïä Obituary</option>
    <option value="wedding">üíç Wedding Program</option>
    <option value="event">üéâ Event / Gathering</option>
    <option value="menu">üçΩ Restaurant Menu</option>
  </select>

  <div id="templateArea">
    <label>Choose Template</label>
    <div class="templates-grid" id="templateGrid"></div>
  </div>

  <div id="extraFields"></div>

  <div class="controls">
    <button id="btnPreview">Live Preview</button>
    <button id="btnReset">Reset</button>
  </div>
</div>

<!-- RIGHT: live preview -->
<div class="panel right">
  <div class="preview-wrap">
    <div class="small-ctrls">
      <button id="btnFontSmall">A-</button>
      <button id="btnFontBig">A+</button>
    </div>

    <div id="previewPoster" class="poster t-classic" data-page="0">
      <div class="title" id="pvTitle">[Title]</div>
      <div class="sub" id="pvDates">Date(s)</div>
      <div class="bio" id="pvDetails">Details / message</div>
    </div>

    <div class="page-thumbs" id="pageThumbs"></div>

    <div class="preview-actions">
      <button id="downloadPNG">Download PNG</button>
      <button id="downloadPDF">Download PDF</button>
      <button class="ghost" id="shareLink">Copy Share Link</button>
    </div>
  </div>
</div>

</div>

<script>
// --------------- Template Definitions ----------------
const TEMPLATES = {
  obituary:[
    {name:"Classic",img:"https://images.unsplash.com/photo-1503264116251-35a269479413?q=80&w=600"},
    {name:"Elegant",img:"https://images.unsplash.com/photo-1487412947147-5cebf100ffc2?q=80&w=600"}
  ],
  wedding:[
    {name:"Floral",img:"https://images.unsplash.com/photo-1517511620798-cec17d428bc0?q=80&w=600"},
    {name:"Modern",img:"https://images.unsplash.com/photo-1501436513143-8d431f65d6d0?q=80&w=600"}
  ],
  event:[
    {name:"Simple",img:"https://images.unsplash.com/photo-1509474520651-1dc98258b593?q=80&w=600"},
    {name:"Colorful",img:"https://images.unsplash.com/photo-1515187029135-18ee286d815b?q=80&w=600"}
  ],
  menu:[
    {name:"Modern",img:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?q=80&w=600"},
    {name:"Classic",img:"https://images.unsplash.com/photo-1499028344343-cd173ffc68a9?q=80&w=600"}
  ]
};

const posterType = document.getElementById('posterType');
const templateGrid = document.getElementById('templateGrid');
const extraFields = document.getElementById('extraFields');
const pvTitle = document.getElementById('pvTitle');
const pvDates = document.getElementById('pvDates');
const pvDetails = document.getElementById('pvDetails');
const previewPoster = document.getElementById('previewPoster');

let selectedTemplate = '';
let titleSize=28;

// ---------------- Render Templates -----------------
function renderTemplates(){
  templateGrid.innerHTML='';
  const type = posterType.value;
  TEMPLATES[type].forEach(tp=>{
    const div=document.createElement('div');
    div.className='tp';
    div.dataset.template=tp.name;
    div.innerHTML=`<img src="${tp.img}"><div class="name">${tp.name}</div>`;
    div.addEventListener('click',()=>{
      templateGrid.querySelectorAll('.tp').forEach(x=>x.classList.remove('active'));
      div.classList.add('active');
      selectedTemplate=tp.name;
      refreshPreview();
    });
    templateGrid.appendChild(div);
  });
  templateGrid.querySelector('.tp').classList.add('active');
  selectedTemplate=TEMPLATES[type][0].name;
}

// ---------------- Extra Fields -------------------
function renderExtra(){
  extraFields.innerHTML='';
  const type = posterType.value;
  if(type==='obituary'){
    extraFields.innerHTML=`<label>Full Name</label><input id="nameField" type="text">
      <label>Date of Birth</label><input id="dob" type="date">
      <label>Date of Passing</label><input id="dop" type="date">
      <label>Message</label><textarea id="msg"></textarea>`;
  } else if(type==='wedding'){
    extraFields.innerHTML=`<label>Bride & Groom</label><input id="bgNames" type="text">
      <label>Date</label><input id="wedDate" type="date">
      <label>Venue & Time</label><input id="venueTime" type="text">
      <label>Message / Order of Service</label><textarea id="msg"></textarea>`;
  } else if(type==='event'){
    extraFields.innerHTML=`<label>Event Name</label><input id="eventName" type="text">
      <label>Host</label><input id="hostName" type="text">
      <label>Date</label><input id="eventDate" type="date">
      <label>Venue</label><input id="venue" type="text">
      <label>Message</label><textarea id="msg"></textarea>`;
  } else if(type==='menu'){
    extraFields.innerHTML=`<label>Restaurant Name</label><input id="restName" type="text">
      <label>Menu Note</label><input id="menuNote" type="text">
      <label>Menu Items (one per line)</label><textarea id="menuItems"></textarea>`;
  }
}

// ---------------- Refresh Preview ----------------
function refreshPreview(){
  const type = posterType.value;
  if(type==='obituary'){
    const n=document.getElementById('nameField').value||'[Name]';
    const d1=document.getElementById('dob').value;
    const d2=document.getElementById('dop').value;
    const msg=document.getElementById('msg').value||'Message / tribute';
    pvTitle.textContent=n;
    pvDates.textContent=(d1 && d2)?`${new Date(d1).toLocaleDateString()} ‚Äî ${new Date(d2).toLocaleDateString()}`:'Date(s)';
    pvDetails.textContent=msg;
  } else if(type==='wedding'){
    const bg=document.getElementById('bgNames').value||'Bride & Groom';
    const d=document.getElementById('wedDate').value;
    const v=document.getElementById('venueTime').value;
    const msg=document.getElementById('msg').value||'Order of Service';
    pvTitle.textContent=bg;
    pvDates.textContent=d?new Date(d).toLocaleDateString(): 'Date';
    pvDetails.textContent=(msg+'\n'+v).trim();
  } else if(type==='event'){
    const en=document.getElementById('eventName').value||'Event Name';
    const h=document.getElementById('hostName').value||'Host';
    const d=document.getElementById('eventDate').value;
    const v=document.getElementById('venue').value;
    const msg=document.getElementById('msg').value||'Message';
    pvTitle.textContent=en;
    pvDates.textContent=d?new Date(d).toLocaleDateString(): 'Date';
    pvDetails.textContent=`Host: ${h}\nVenue: ${v}\n${msg}`;
  } else if(type==='menu'){
    const r=document.getElementById('restName').value||'Restaurant';
    const mn=document.getElementById('menuNote').value;
    const items=document.getElementById('menuItems').value||'Dish - RPrice';
    pvTitle.textContent=r;
    pvDates.textContent=mn;
    pvDetails.textContent=items;
  }
  previewPoster.style.fontSize=titleSize+'px';
}

// ---------------- Font Size Controls ----------------
document.getElementById('btnFontSmall').addEventListener('click',()=>{titleSize=Math.max(14,titleSize-2); refreshPreview();});
document.getElementById('btnFontBig').addEventListener('click',()=>{titleSize=Math.min(60,titleSize+2); refreshPreview();});

// ---------------- Poster Type Change ----------------
posterType.addEventListener('change',()=>{
  renderTemplates();
  renderExtra();
  refreshPreview();
});

// ---------------- Extra Field Listeners ----------------
extraFields.addEventListener('input',refreshPreview);

// ---------------- Initial Render ----------------
renderTemplates();
renderExtra();
refreshPreview();
</script>
</body>
</html>
