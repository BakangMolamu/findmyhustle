<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Profile — FindMyHustle</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  body{margin:0;font-family:'Poppins',system-ui,Arial,sans-serif;background:linear-gradient(135deg,#3b0a57,#0d1a5e);color:#fff;padding:20px;min-height:100vh}
  .wrap{max-width:800px;margin:0 auto;background:rgba(255,255,255,0.06);padding:18px;border-radius:12px}
  .media{display:flex;gap:10px;flex-wrap:wrap}
  .media img{width:48%;height:300px;object-fit:cover;border-radius:8px}
  h1{margin:0 0 8px}
  p{margin:6px 0;color:rgba(255,255,255,0.9)}
  .back{display:inline-block;margin-top:10px;padding:8px 10px;border-radius:8px;background:#7b3fe4;color:#fff;text-decoration:none}
  @media(max-width:520px){.media img{width:100%;height:220px}}
</style>
</head>
<body>
<div class="wrap" id="wrap">
  <a class="back" href="browse.html">← Back to browse</a>
  <div id="content">
    <p>Loading profile…</p>
  </div>
</div>

<script>
  // ---------- PASTE YOUR WEB APP URL ----------
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbw-jpUAzD76hG25-TgKuKOXSltCCnmG7AqI0Q-gT0-ZqTbf17AyLzTYCaXUVzNnIkHzXQ/exec";
  // ------------------------------------------

  function qp(name){ const u=new URL(window.location.href); return u.searchParams.get(name); }
  function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

  async function loadProfile() {
    const id = qp('id');
    if (!id) { document.getElementById('content').innerHTML = '<p>No profile id provided.</p>'; return; }
    try {
      const r = await fetch(WEB_APP_URL + '?id=' + encodeURIComponent(id));
      const text = await r.text();
      const obj = JSON.parse(text || '{}');
      if (!obj || !obj.ID) { document.getElementById('content').innerHTML = '<p>Profile not found.</p>'; return; }

      document.getElementById('content').innerHTML = `
        <h1>${escapeHtml(obj.Name)}</h1>
        <p><strong>${escapeHtml(obj.Skill)}</strong> — ${escapeHtml(obj.Province)} • ${escapeHtml(obj.City)}</p>
        <div class="media">
          <img src="${obj.Picture1_URL||''}" alt="pic1" onerror="this.style.display='none'">
          <img src="${obj.Picture2_URL||''}" alt="pic2" onerror="this.style.display='none'">
        </div>
        <p>${escapeHtml(obj.Description || '')}</p>
        <p>Phone/WhatsApp: <strong>${escapeHtml(obj.Phone || '')}</strong></p>
        <p>Status: <strong>${escapeHtml(obj.Verified || '')}</strong></p>
      `;
    } catch (err) {
      console.error(err);
      document.getElementById('content').innerHTML = '<p>Failed loading profile.</p>';
    }
  }

  loadProfile();
</script>
</body>
</html>
