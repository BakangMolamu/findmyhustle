<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Browse Hustlers</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f0f0ff;
        margin: 0;
        padding: 20px;
    }

    h1 {
        text-align: center;
        color: #4b0082;
        margin-bottom: 20px;
    }

    .filters {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 20px;
    }

    select {
        padding: 10px;
        width: 48%;
        border: 2px solid #4b0082;
        border-radius: 8px;
    }

    .card {
        background: white;
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 20px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }

    .media {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .media img {
        width: 48%;
        border-radius: 8px;
    }

    .media video {
        width: 100%;
        border-radius: 8px;
        margin-top: 10px;
    }

    .name {
        font-size: 20px;
        font-weight: bold;
        margin-top: 10px;
        color: #4b0082;
    }

    .info {
        margin-top: 5px;
        color: #333;
        font-size: 15px;
    }
</style>
</head>
<body>

<h1>Browse Skilled Hustlers</h1>

<div class="filters">
    <select id="filterProvince">
        <option value="">All Provinces</option>
        <option value="Gauteng">Gauteng</option>
        <option value="North West">North West</option>
        <option value="Limpopo">Limpopo</option>
        <option value="Mpumalanga">Mpumalanga</option>
        <option value="Free State">Free State</option>
        <option value="KwaZulu-Natal">KwaZulu-Natal</option>
        <option value="Eastern Cape">Eastern Cape</option>
        <option value="Northern Cape">Northern Cape</option>
        <option value="Western Cape">Western Cape</option>
    </select>

    <select id="filterSkill">
        <option value="">All Skills</option>
        <option value="Plumber">Plumber</option>
        <option value="Electrician">Electrician</option>
        <option value="Mechanic">Mechanic</option>
        <option value="Hairdresser">Hairdresser</option>
        <option value="Makeup Artist">Makeup Artist</option>
        <option value="Welder">Welder</option>
        <option value="Gardener">Gardener</option>
        <option value="Photographer">Photographer</option>
        <option value="Caterer">Caterer</option>
        <option value="Cook/Chef">Cook/Chef</option>
        <option value="Painter">Painter</option>
        <option value="DJ">DJ</option>
        <option value="Dancer">Dancer</option>
        <option value="Tailor">Tailor</option>
        <option value="Graphic Designer">Graphic Designer</option>
    </select>
</div>

<div id="results"></div>

<script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzPv4jMATIkjJma6j5Q2CnYL1UU9j6ANrBo7Sj3BFBcnkXkWae-fkGk6kesNJcjKsU2/exec";

    async function loadData() {
        const res = await fetch(WEB_APP_URL);
        const data = await res.json();
        render(data);
    }

    function render(list) {
        const province = document.getElementById("filterProvince").value;
        const skill = document.getElementById("filterSkill").value;

        const filtered = list.filter(x =>
            (province === "" || x.Province === province) &&
            (skill === "" || x.Skill === skill)
        );

        document.getElementById("results").innerHTML = filtered.map(x => `
            <div class="card">

                <div class="media">
                    <img src="${x.Picture1URL}" alt="Image 1">
                    <img src="${x.Picture2URL}" alt="Image 2">
                    <video src="${x.VideoURL}" controls></video>
                </div>

                <div class="name">${x.Name} (${x.Skill})</div>

                <div class="info">üìç ${x.City}, ${x.Province}</div>
                <div class="info">üìû ${x.Phone}</div>
                <div class="info">${x.Description}</div>

            </div>
        `).join("");
    }

    document.getElementById("filterProvince").onchange = loadData;
    document.getElementById("filterSkill").onchange = loadData;

    loadData();
</script>

</body>
</html>
