<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Event Poster Generator — Full v4</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{--bg:linear-gradient(135deg,#cfe9ff,#e8d6ff);--card:#fff;--accent:#6366f1;--radius:14px;font-family:Inter,system-ui,Arial}
*{box-sizing:border-box}
body{margin:0;min-height:100vh;background:var(--bg);font-family:var(--font-family);color:#0f172a}
.app{max-width:1280px;margin:18px auto;padding:14px;display:grid;grid-template-columns:320px 1fr 320px;gap:14px}
.panel{background:var(--card);border-radius:var(--radius);padding:12px;box-shadow:0 10px 30px rgba(12,15,30,.06)}
h1{margin:6px 0 12px;font-size:18px}
label{font-size:13px;color:#374151}
input[type=text],input[type=file],select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #e6e9ef;margin-top:6px}
textarea{min-height:72px}
.btn{display:inline-block;padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,#6366f1,#8b5cf6);color:white;border:none;cursor:pointer}
.muted{background:transparent;border:1px solid #edf2f7;padding:8px;border-radius:8px}
.templates{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.tpl{width:100%;height:80px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid rgba(0,0,0,.06)}
.canvas-wrap{display:flex;flex-direction:column;align-items:center;gap:8px;position:relative}
#posterCanvas{background:#fff;border-radius:12px;box-shadow:0 14px 40px rgba(12,15,30,0.12);touch-action:none}
.controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.small{font-size:13px;color:#6b7280}
.elements-list{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.element-row{display:flex;align-items:center;gap:8px;padding:8px;border-radius:8px;border:1px solid #f1f5f9}
.row-actions{margin-left:auto;display:flex;gap:6px}
.crop-popup{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:9999}
.crop-content{background:#fff;padding:12px;border-radius:12px;display:flex;flex-direction:column;align-items:center}
#cropCanvas{border:1px solid #ccc}
.handle{width:10px;height:10px;background:#6366f1;position:absolute;cursor:se-resize;border-radius:2px;z-index:10}
@media(max-width:1100px){.app{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div class="app">
<aside class="panel">
<h1>Create Poster</h1>
<div class="small">Fill details → pick template → customize → export.</div>
<label>Event Name</label>
<input id="eventName" type="text" placeholder="Community Jazz Night">
<label>Date & Time</label>
<input id="eventDate" type="datetime-local">
<label>Location</label>
<input id="eventLocation" type="text" placeholder="Town Hall">
<label>Event Type</label>
<select id="eventType"><option>Concert</option><option>Wedding</option><option>Birthday</option><option>Sale</option><option>Workshop</option><option>Other</option></select>
<label>Description</label>
<textarea id="eventDesc">An evening of live jazz and local food stalls.</textarea>
<label>Upload Images</label>
<input id="imageUpload" type="file" accept="image/*" multiple>
<label>QR Code Link</label>
<input id="qrLink" type="text" placeholder="https://...">
<div style="display:flex;gap:8px;margin-top:12px">
<button id="genTemplates" class="btn">Suggest Templates</button>
<button id="addTextBtn" class="muted">+ Add Text</button>
</div>
<div class="templates" id="templates"></div>
</aside>
<main class="panel">
<h1>Preview & Editor</h1>
<div class="canvas-wrap">
<canvas id="posterCanvas" width="1080" height="1350"></canvas>
</div>
<div class="controls">
<select id="sizeSelect"><option value="1080x1350">Instagram</option><option value="1200x1800">Poster</option><option value="2480x3508">A4 Print</option></select>
<button id="exportPNG" class="btn">Download PNG</button>
<button id="exportPDF" class="btn">Download PDF</button>
</div>
</main>
<aside class="panel">
<h1>Elements</h1>
<div class="elements-list" id="elementsList"></div>
</aside>
<div class="crop-popup" id="cropPopup">
<div class="crop-content">
<canvas id="cropCanvas" width="400" height="400"></canvas>
<div style="margin-top:8px">
<button id="applyCrop" class="btn">Apply Crop</button>
<button id="cancelCrop" class="muted">Cancel</button>
</div>
</div>
</div>
<script>
// Canvas & Elements
const canvas=document.getElementById('posterCanvas');
const ctx=canvas.getContext('2d');
let elements=[];let selectedElement=null;
function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);elements.forEach(el=>{
if(el.type==='text'){ctx.font=`${el.size}px ${el.font}`;ctx.fillStyle=el.color;ctx.fillText(el.text,el.x,el.y);}
if(el.type==='image'){ctx.drawImage(el.img,el.x,el.y,el.width,el.height);}
if(el.type==='qr'){ctx.drawImage(el.img,el.x,el.y,el.width,el.height);}});}
canvas.addEventListener('mousedown',e=>{
const rect=canvas.getBoundingClientRect();
const mx=e.clientX-rect.left,my=e.clientY-rect.top;
selectedElement=elements.find(el=>mx>=el.x&&mx<=el.x+el.width&&my>=el.y&&my<=el.y+el.height);
});
canvas.addEventListener('mousemove',e=>{if(selectedElement&&e.buttons){
const rect=canvas.getBoundingClientRect();
selectedElement.x=e.clientX-rect.left-selectedElement.width/2;
selectedElement.y=e.clientY-rect.top-selectedElement.height/2;
draw();}});
canvas.addEventListener('mouseup',e=>{selectedElement=null;});
// Add Text
document.getElementById('addTextBtn').addEventListener('click',()=>{
const text=prompt('Enter text','New Text');
if(text){elements.push({type:'text',text,x:50,y:50,size:36,font:'Playfair Display',color:'#000',width:ctx.measureText(text).width,height:36});draw();}});
// Image Upload & Crop
let cropImg=null;const cropCanvas=document.getElementById('cropCanvas');const cropCtx=cropCanvas.getContext('2d');
const cropPopup=document.getElementById('cropPopup');
document.getElementById('imageUpload').addEventListener('change',e=>{const files=[...e.target.files];
files.forEach(file=>{const reader=new FileReader();reader.onload=function(ev){
cropImg=new Image();cropImg.onload=function(){cropCtx.clearRect(0,0,cropCanvas.width,cropCanvas.height);cropCtx.drawImage(cropImg,0,0,cropCanvas.width,cropCanvas.height);cropPopup.style.display='flex';};cropImg.src=ev.target.result;};reader.readAsDataURL(file);});});
document.getElementById('applyCrop').addEventListener('click',()=>{
const imgEl=new Image();imgEl.src=cropCanvas.toDataURL();imgEl.onload=function(){
elements.push({type:'image',img:imgEl,x:50,y:50,width:300,height:200});draw();cropPopup.style.display='none';};});
document.getElementById('cancelCrop').addEventListener('click',()=>{cropPopup.style.display='none';});
// QR Code
document.getElementById('qrLink').addEventListener('change',()=>{
const val=document.getElementById('qrLink').value;if(val){
const qr=new Image();qr.src='https://api.qrserver.com/v1/create-qr-code/?size=150x150&data='+encodeURIComponent(val);
qr.onload=function(){elements.push({type:'qr',img:qr,x:50,y:50,width:150,height:150});draw();}}});
// Export PNG
document.getElementById('exportPNG').addEventListener('click',()=>{
const link=document.createElement('a');link.download='poster.png';link.href=canvas.toDataURL();link.click();});
// Export PDF (using jsPDF CDN)
function downloadPDF(){
const { jsPDF } = window.jspdf;const pdf=new jsPDF('p','pt',[canvas.width,canvas.height]);pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, canvas.width, canvas.height);pdf.save('poster.pdf');}
document.getElementById('exportPDF').addEventListener('click',downloadPDF);
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>
