<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poster Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', sans-serif;
    background: #f2f4f7;
    margin: 0;
    padding: 20px;
  }
  h1 { text-align: center; margin-bottom: 20px; }
  .container { display: flex; flex-wrap: wrap; gap: 20px; }
  .form-container, .preview-container { flex: 1 1 400px; background: #fff; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);}
  
  label { display: block; margin-top: 10px; font-weight: bold; }
  input, textarea, select { width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; }
  
  .poster { width: 100%; min-height: 600px; background: #fff; border-radius: 15px; padding: 30px; box-sizing: border-box; position: relative; overflow: hidden; }
  .poster h2 { font-family: 'Playfair Display', serif; margin: 10px 0; }
  .poster .section { margin-bottom: 20px; }
  
  .decorative { position: absolute; width: 100px; height: 100px; opacity: 0.2; }
  .decorative.top-left { top: 0; left: 0; }
  .decorative.bottom-right { bottom: 0; right: 0; transform: rotate(180deg); }
  
  button { margin-top: 15px; padding: 10px 15px; font-size: 16px; border: none; border-radius: 8px; background: #1e90ff; color: #fff; cursor: pointer; }
  button:hover { background: #1c7cd6; }
</style>
</head>
<body>

<h1>Poster Studio</h1>

<div class="container">
  <div class="form-container">
    <label for="template">Select Template</label>
    <select id="template">
      <option value="wedding">Wedding</option>
      <option value="funeral">Funeral</option>
      <option value="menu">Menu</option>
      <option value="event">Event</option>
    </select>
    
    <div id="form-fields">
      <!-- Dynamic fields inserted here -->
    </div>

    <button id="generate">Generate Poster</button>
    <button id="download">Download as PNG</button>
  </div>

  <div class="preview-container">
    <div id="poster" class="poster">
      <!-- Poster preview -->
      <img src="https://i.imgur.com/6y0Z7Sx.png" class="decorative top-left" />
      <img src="https://i.imgur.com/6y0Z7Sx.png" class="decorative bottom-right" />
    </div>
  </div>
</div>

<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<script>
  const templateSelect = document.getElementById('template');
  const formFields = document.getElementById('form-fields');
  const poster = document.getElementById('poster');
  const generateBtn = document.getElementById('generate');
  const downloadBtn = document.getElementById('download');

  const templates = {
    wedding: [
      { label: 'Couple Names', id: 'names' },
      { label: 'Date', id: 'date' },
      { label: 'Venue', id: 'venue' },
      { label: 'Ceremony Details', id: 'ceremony' },
      { label: 'Reception Details', id: 'reception' }
    ],
    funeral: [
      { label: 'Deceased Name', id: 'names' },
      { label: 'Date of Death', id: 'date' },
      { label: 'Funeral Venue', id: 'venue' },
      { label: 'Tribute / Memories', id: 'tribute' },
      { label: 'Survived By', id: 'survived' }
    ],
    menu: [
      { label: 'Restaurant Name', id: 'names' },
      { label: 'Section', id: 'section' },
      { label: 'Items & Prices', id: 'items' }
    ],
    event: [
      { label: 'Event Name', id: 'names' },
      { label: 'Date', id: 'date' },
      { label: 'Venue', id: 'venue' },
      { label: 'Highlights / Details', id: 'details' }
    ]
  };

  function loadFormFields() {
    formFields.innerHTML = '';
    const fields = templates[templateSelect.value];
    fields.forEach(f => {
      const label = document.createElement('label');
      label.textContent = f.label;
      const input = f.id === 'items' || f.id === 'tribute' || f.id === 'details' || f.id === 'ceremony' || f.id === 'reception'
        ? document.createElement('textarea')
        : document.createElement('input');
      input.id = f.id;
      formFields.appendChild(label);
      formFields.appendChild(input);
    });
  }

  templateSelect.addEventListener('change', loadFormFields);
  loadFormFields();

  function generatePoster() {
    poster.innerHTML = '';
    const decoTop = document.createElement('img');
    decoTop.src = "https://i.imgur.com/6y0Z7Sx.png";
    decoTop.className = 'decorative top-left';
    const decoBottom = document.createElement('img');
    decoBottom.src = "https://i.imgur.com/6y0Z7Sx.png";
    decoBottom.className = 'decorative bottom-right';
    poster.appendChild(decoTop);
    poster.appendChild(decoBottom);

    const type = templateSelect.value;
    const data = {};
    templates[type].forEach(f => {
      data[f.id] = document.getElementById(f.id).value;
    });

    if(type === 'wedding') {
      const h = document.createElement('h2'); h.textContent = data.names; poster.appendChild(h);
      const sections = ['ceremony','reception'];
      sections.forEach(s => {
        if(data[s]) {
          const div = document.createElement('div');
          div.className = 'section';
          div.innerHTML = `<strong>${s.charAt(0).toUpperCase()+s.slice(1)}:</strong> ${data[s]}`;
          poster.appendChild(div);
        }
      });
      if(data.date || data.venue) {
        const div = document.createElement('div'); div.className='section';
        div.innerHTML = `${data.date ? `<strong>Date:</strong> ${data.date}<br>` : ''}${data.venue ? `<strong>Venue:</strong> ${data.venue}` : ''}`;
        poster.appendChild(div);
      }
    }

    if(type === 'funeral') {
      const h = document.createElement('h2'); h.textContent = data.names; poster.appendChild(h);
      ['tribute','survived'].forEach(s=>{
        if(data[s]) {
          const div = document.createElement('div'); div.className='section';
          div.innerHTML = `<strong>${s.charAt(0).toUpperCase()+s.slice(1)}:</strong> ${data[s]}`;
          poster.appendChild(div);
        }
      });
      if(data.date || data.venue) {
        const div = document.createElement('div'); div.className='section';
        div.innerHTML = `${data.date ? `<strong>Date of Death:</strong> ${data.date}<br>` : ''}${data.venue ? `<strong>Funeral Venue:</strong> ${data.venue}` : ''}`;
        poster.appendChild(div);
      }
    }

    if(type==='menu') {
      const h = document.createElement('h2'); h.textContent = data.names; poster.appendChild(h);
      if(data.section && data.items){
        const div = document.createElement('div'); div.className='section';
        div.innerHTML = `<strong>${data.section}:</strong><br>${data.items.replace(/\n/g,'<br>')}`;
        poster.appendChild(div);
      }
    }

    if(type==='event'){
      const h = document.createElement('h2'); h.textContent = data.names; poster.appendChild(h);
      if(data.date || data.venue || data.details){
        const div = document.createElement('div'); div.className='section';
        div.innerHTML = `${data.date ? `<strong>Date:</strong> ${data.date}<br>` : ''}${data.venue ? `<strong>Venue:</strong> ${data.venue}<br>` : ''}${data.details ? `<strong>Details:</strong> ${data.details}` : ''}`;
        poster.appendChild(div);
      }
    }
  }

  generateBtn.addEventListener('click', generatePoster);

  downloadBtn.addEventListener('click', () => {
    html2canvas(poster).then(canvas => {
      const link = document.createElement('a');
      link.download = 'poster.png';
      link.href = canvas.toDataURL();
      link.click();
    });
  });
</script>

</body>
  </html>
