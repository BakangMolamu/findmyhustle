<!DOCTYPE html><html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Upload Your Hustle — FindMyHustle</title><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet"><style>
  :root {
    --blue: #7ad3ff;
    --purple: #8a6cff;
    --card-bg: rgba(255,255,255,0.08);
    --glass: rgba(255,255,255,0.06);
  }

  html,body { height:100%; margin:0; font-family:'Poppins',system-ui,Arial,sans-serif; }
  body {
    display:flex;
    justify-content:center;
    padding:28px;
    /* light blue + purple gradient as requested */
    background: linear-gradient(135deg, var(--blue) 0%, #c9b6ff 50%, var(--purple) 100%);
    color:#07203a;
  }

  .card {
    width:100%;
    max-width:820px;
    background:var(--card-bg);
    border-radius:14px;
    padding:22px;
    box-shadow:0 12px 30px rgba(3,8,18,0.12);
    backdrop-filter:blur(6px);
  }

  h1 { text-align:center; margin:0 0 6px; }
  p.lead { text-align:center; margin:0 0 18px; color:rgba(3,8,18,0.65); }

  label { display:block; margin-top:12px; font-weight:600; font-size:13px; color:rgba(3,8,18,0.85); }
  input, select, textarea {
    width:100%;
    padding:10px;
    margin-top:6px;
    border-radius:10px;
    border:none;
    font-size:14px;
    box-shadow:0 1px 0 rgba(3,8,18,0.03) inset;
  }

  textarea { min-height:90px; }

  .row { display:flex; gap:12px; }
  .row .col { flex:1; }

  .media-row { display:flex; gap:12px; margin-top:10px; }
  .thumb {
    flex:1;
    min-height:120px;
    background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.04));
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    border:1px dashed rgba(3,8,18,0.06);
  }

  .thumb img { width:100%; height:100%; object-fit:cover; display:block }

  button {
    width:100%;
    margin-top:20px;
    padding:14px;
    border:none;
    border-radius:10px;
    font-size:16px;
    font-weight:700;
    background:linear-gradient(90deg,#6c63ff,#4bc0ff);
    color:white;
    cursor:pointer;
  }

  .small { font-size:13px; color:rgba(3,8,18,0.6); margin-top:6px }

  #overlay {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(2,6,23,0.35);
    align-items:center;
    justify-content:center;
    font-weight:700;
    color:white;
    z-index:9999;
  }

  #overlay.show { display:flex; }

  #toast {
    position:fixed;
    left:50%;
    transform:translateX(-50%);
    bottom:28px;
    background:#0b3; /* will be overwritten for error */
    color:#002;
    padding:12px 16px;
    border-radius:10px;
    font-weight:700;
    display:none;
    z-index:10000;
  }
  #toast.show{ display:block }
  #toast.error{ background:#ffd6d6; color:#420000 }

  @media (max-width:720px){ .row{flex-direction:column} }
</style></head>
<body><div id="overlay">Uploading… please wait</div>
<div id="toast">Message</div><main class="card">
<h1>Upload Your Hustle</h1>
<p class="lead">Profiles appear on Browse only after verification. Required: <strong>Name, Skill, Picture1URL, Picture2URL</strong>.</p><script>
// Using the web app URL you provided earlier (the one in your Apps Script message).
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzUGuj9eN4_xEBNHIEr_sypGVXJ7QA6j04UjdZ9Wzc1zYiYezEaX2p-eF_d7haAXBff/exec";
</script><form id="uploadForm"><label>Full Name *</label> <input id="name" name="Name" required placeholder="e.g. Thabo M">

<div class="row">
  <div class="col">
    <label>Skill *</label>
    <select id="skill" name="Skill" required>
      <option value="">Select skill</option>
      <option>Barber</option>
      <option>Hairdresser</option>
      <option>Photographer</option>
      <option>Videographer</option>
      <option>Electrician</option>
      <option>Plumber</option>
      <option>Graphic Designer</option>
      <option>Other</option>
    </select>
  </div>  <div class="col">
    <label>Province</label>
    <select id="province" name="Province">
      <option value="">Select province</option>
      <option>Eastern Cape</option>
      <option>Free State</option>
      <option>Gauteng</option>
      <option>KwaZulu-Natal</option>
      <option>Limpopo</option>
      <option>Mpumalanga</option>
      <option>North West</option>
      <option>Western Cape</option>
    </select>
  </div>
</div><label>City</label> <input id="city" name="City" placeholder="e.g. Johannesburg">

<label>Email (optional)</label> <input id="email" name="Email" type="email" placeholder="optional">

<label>Description</label>

<textarea id="description" name="Description" placeholder="Short description (1-2 lines)"></textarea><label>Phone</label> <input id="phone" name="Phone" placeholder="e.g. +27 82 555 1234">

<div class="media-row" style="margin-top:12px;">
  <div class="thumb" id="thumb1">Picture 1 preview</div>
  <div class="thumb" id="thumb2">Picture 2 preview</div>
</div><label>Picture 1 URL *</label> <input id="pic1" name="Picture1URL" type="url" required placeholder="Direct public image URL (Imgur, Cloudinary, public Drive link)">

<label>Picture 2 URL *</label> <input id="pic2" name="Picture2URL" type="url" required placeholder="Another image URL">

<label>Video URL (YouTube link or public video URL)</label> <input id="video" name="VideoURL" type="url" placeholder="optional — e.g. https://youtu.be/XXXXX">

<div class="small">Tip: your Apps Script stores links — host images publicly. If you want, I can show how to upload to Imgur or Cloudinary from your phone.</div><button type="submit">Submit Hustle</button>

</form>
</main><script>
const form = document.getElementById('uploadForm');
const overlay = document.getElementById('overlay');
const toast = document.getElementById('toast');
const thumb1 = document.getElementById('thumb1');
const thumb2 = document.getElementById('thumb2');

function showToast(text, isError){
  toast.textContent = text;
  toast.className = isError ? 'error show' : 'show';
  setTimeout(()=>{ toast.className = isError ? 'error' : ''; toast.style.display='none'; toast.style.display=''; }, 4000);
}

function setImagePreview(el, url){
  el.innerHTML = '';
  if(!url) { el.textContent = 'No preview'; return }
  const img = document.createElement('img');
  img.src = url;
  img.alt = 'preview';
  img.onerror = ()=>{ el.textContent = 'Could not load preview'; };
  el.appendChild(img);
}

// live previews
document.getElementById('pic1').addEventListener('input', (e)=> setImagePreview(thumb1, e.target.value.trim()));
document.getElementById('pic2').addEventListener('input', (e)=> setImagePreview(thumb2, e.target.value.trim()));

form.addEventListener('submit', async (ev)=>{
  ev.preventDefault();

  // gather data
  const payload = {
    Name: (document.getElementById('name').value || '').trim(),
    Email: (document.getElementById('email').value || '').trim(),
    Skill: (document.getElementById('skill').value || '').trim(),
    Province: (document.getElementById('province').value || '').trim(),
    City: (document.getElementById('city').value || '').trim(),
    Description: (document.getElementById('description').value || '').trim(),
    Phone: (document.getElementById('phone').value || '').trim(),
    Picture1URL: (document.getElementById('pic1').value || '').trim(),
    Picture2URL: (document.getElementById('pic2').value || '').trim(),
    VideoURL: (document.getElementById('video').value || '').trim()
  };

  // client-side required check (match Apps Script)
  const missing = [];
  if(!payload.Name) missing.push('Name');
  if(!payload.Skill) missing.push('Skill');
  if(!payload.Picture1URL) missing.push('Picture1URL');
  if(!payload.Picture2URL) missing.push('Picture2URL');
  if(missing.length) return showToast('Missing required: ' + missing.join(', '), true);

  // show overlay
  overlay.classList.add('show');

  try{
    // Important: do NOT set mode: 'cors' — Apps Script + browser works best without preflight
    const res = await fetch(WEB_APP_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });

    // Some deployments return non-200 even when successful; still try to parse
    const data = await res.json().catch(()=>null);

    overlay.classList.remove('show');

    if(data && data.status === 'success'){
      showToast('Success — Listing created: ' + data.id, false);
      form.reset();
      setImagePreview(thumb1, '');
      setImagePreview(thumb2, '');
      // optional: redirect to profile page (if you have one)
      // location.href = `profile.html?id=${data.id}`;
    } else if(data && data.status === 'error'){
      showToast('Server error: ' + (data.message||'Unknown'), true);
      console.error('Apps Script returned error', data);
    } else {
      // unexpected response
      showToast('Unexpected response from server. Open console for details.', true);
      console.log('response', res, data);
    }
});
</script></body>
      </html>
